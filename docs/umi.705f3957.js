var F=Object.assign,W=(h,u,e)=>new Promise((s,o)=>{var l=f=>{try{p(e.next(f))}catch(R){o(R)}},r=f=>{try{p(e.throw(f))}catch(R){o(R)}},p=f=>f.done?s(f.value):Promise.resolve(f.value).then(l,r);p((e=e.apply(h,u)).next())});(function(h){function u(t){for(var i=t[0],n=t[1],c=t[2],d,O,A=0,T=[];A<i.length;A++)O=i[A],Object.prototype.hasOwnProperty.call(o,O)&&o[O]&&T.push(o[O][0]),o[O]=0;for(d in n)Object.prototype.hasOwnProperty.call(n,d)&&(h[d]=n[d]);for(v&&v(t);T.length;)T.shift()();return l.push.apply(l,c||[]),e()}function e(){for(var t,i=0;i<l.length;i++){for(var n=l[i],c=!0,d=1;d<n.length;d++){var O=n[d];o[O]!==0&&(c=!1)}c&&(l.splice(i--,1),t=r(r.s=n[0]))}return t}var s={},o={0:0},l=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return h[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=h,r.c=s,r.d=function(t,i,n){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},r.r=function(t){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(i&1&&(t=r(t)),i&8)return t;if(i&4&&typeof t=="object"&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),i&2&&typeof t!="string")for(var c in t)r.d(n,c,function(d){return t[d]}.bind(null,c));return n},r.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="./";var p=window.webpackJsonp=window.webpackJsonp||[],f=p.push.bind(p);p.push=u,p=p.slice();for(var R=0;R<p.length;R++)u(p[R]);var v=f;return l.push([0,1]),e()})({"+ego":function(h,u,e){"use strict";e.r(u);var s=e("nKUr"),o=e("cDcd");const l=Object(o.memo)(n=>Object(s.jsx)("div",{className:"layout",children:n.children}));var r=l,p=e("ODXe"),f=e("sm/d");const R=(n,c)=>{switch(c.type){case"update":return c.payload;default:return n}},v=Object(o.memo)(n=>{const c=Object(o.useReducer)(R,"red"),d=Object(p.a)(c,2),O=d[0],A=d[1];return Object(s.jsx)(f.a.Provider,{value:{state:O,dispatch:A},children:n.children})});var t=v,i=u.default=Object(o.memo)(n=>Object(s.jsx)(t,{children:Object(s.jsx)(r,{children:n.children})}))},0:function(h,u,e){h.exports=e("tB8F")},"9kvl":function(h,u,e){"use strict";e.d(u,"b",function(){return s.b}),e.d(u,"c",function(){return o.a}),e.d(u,"d",function(){return i}),e.d(u,"a",function(){return T.a});var s=e("FfOG"),o=e("bCY9");const l=1;var r=e("I5X1"),p=e("Ff2n"),f=e("io9h"),R=e("rlch"),v=e("9Baz"),t=e("0iz5");function i(m,x={}){return Object(t.a)(m,F({formatResult:g=>g==null?void 0:g.result,requestMethod:g=>{if(typeof g=="string")return A(g);if(typeof g=="object"){const D=g.url,N=Object(p.a)(g,["url"]);return A(D,N)}throw new Error("request options error")}},x))}let n;(function(m){m[m.SILENT=0]="SILENT",m[m.WARN_MESSAGE=1]="WARN_MESSAGE",m[m.ERROR_MESSAGE=2]="ERROR_MESSAGE",m[m.NOTIFICATION=4]="NOTIFICATION",m[m.REDIRECT=9]="REDIRECT"})(n||(n={}));const c="/exception";let d;const O=()=>{var m;if(d)return d;const x=o.a.applyPlugins({key:"request",type:R.a.modify,initialValue:{}}),g=((m=x.errorConfig)===null||m===void 0?void 0:m.adaptor)||(a=>a);d=Object(f.a)(F({errorHandler:a=>{var _,L,C;if(a==null||((_=a.request)===null||_===void 0||((L=_.options)===null||L===void 0))?void 0:L.skipErrorHandler)throw a;let y;if(a.name==="ResponseError"&&a.data&&a.request){var I;const j={req:a.request,res:a.response};y=g(a.data,j),a.message=((I=y)===null||I===void 0?void 0:I.errorMessage)||a.message,a.data=a.data,a.info=y}if(y=a.info,y){var S,P,U;const j=(S=y)===null||S===void 0?void 0:S.errorMessage,E=(P=y)===null||P===void 0?void 0:P.errorCode,M=((U=x.errorConfig)===null||U===void 0?void 0:U.errorPage)||c;switch((C=y)===null||C===void 0?void 0:C.showType){case n.SILENT:break;case n.WARN_MESSAGE:v.message.warn(j);break;case n.ERROR_MESSAGE:v.message.error(j);break;case n.NOTIFICATION:v.notification.open({message:j});break;case n.REDIRECT:s.b.push({pathname:M,query:{errorCode:E,errorMessage:j}});break;default:v.message.error(j);break}}else v.message.error(a.message||"Request error, please retry.");throw a}},x)),d.use((a,_)=>W(this,null,function*(){var L;yield _();const C=a.req,y=a.res;if((L=C.options)===null||L===void 0?void 0:L.skipErrorHandler)return;const I=C.options,S=I.getResponse,P=S?y.data:y,U=g(P,a);if(U.success===!1){const j=new Error(U.errorMessage);throw j.name="BizError",j.data=P,j.info=U,j}}));const D=x.middlewares||[];D.forEach(a=>{d.use(a)});const N=x.requestInterceptors||[],b=x.responseInterceptors||[];return N.map(a=>{d.interceptors.request.use(a)}),b.map(a=>{d.interceptors.response.use(a)}),d},A=(m,x)=>{const g=O();return g(m,x)};var T=e("qhky")},A8du:function(h,u,e){"use strict";e.r(u);var s=e("nKUr"),o=e("cDcd"),l=e("9kvl"),r=u.default=()=>Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(l.a,{children:Object(s.jsx)("title",{children:"login"})}),Object(s.jsx)("div",{children:"login"})]})},FfOG:function(h,u,e){"use strict";e.d(u,"a",function(){return r}),e.d(u,"b",function(){return l});var s=e("YS25");let o={basename:"/"};window.routerBase&&(o.basename=window.routerBase);let l=Object({NODE_ENV:"production"}).__IS_SERVER?null:Object(s.b)(o);const r=(p=!1)=>(p||(l=Object(s.b)(o)),l)},GV2H:function(h,u,e){"use strict";e.r(u);var s=e("nKUr"),o=e("ET/R"),l=e("iuhU"),r=e("cDcd"),p=e("9kvl"),f=e("sm/d"),R={theme:"theme___yQy2E",red:"red___ROgao",blue:"blue___1YK0d"};let v=0;const t=6e3;var i=u.default=()=>{const n=Object(r.useContext)(f.a),c=Object(p.d)("/sentences"),d=c.data,O=d===void 0?{}:d,A=c.error,T=c.loading;return console.log("data",O),Object(r.useEffect)(()=>{console.log("ENV :>> ",Object({NODE_ENV:"production"}).ENV),console.log("SERVER_PATH","http://poetry.apiopen.top/")},[]),Object(o.a)(()=>{console.log("useMount")}),Object(r.useEffect)(()=>{const m=window.setInterval(()=>{n.dispatch({type:"update",payload:["blue","red"][v++%2]})},t);return()=>{window.clearTimeout(m)}},[n]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(p.a,{children:Object(s.jsx)("title",{children:n.state})}),Object(s.jsx)("div",{className:Object(l.a)(R.theme,R[n.state]),children:O.name})]})}},I5X1:function(h,u,e){"use strict";e.d(u,"a",function(){return v});var s=e("ODXe"),o=e("cDcd"),l=e.n(o),r=e("aUsF"),p=e.n(r),f=e("FMtG"),R=e.n(f);function v(t,i){const n=Object(o.useContext)(f.UmiContext),c=Object(o.useRef)(i);c.current=i;const d=Object(o.useState)(()=>c.current?c.current(n.data[t]):n.data[t]),O=Object(s.a)(d,2),A=O[0],T=O[1],m=Object(o.useRef)(A);m.current=A;const x=Object(o.useRef)(!1);return Object(o.useEffect)(()=>(x.current=!0,()=>{x.current=!1}),[]),Object(o.useEffect)(()=>{const g=D=>{if(!x.current)setTimeout(()=>{n.data[t]=D,n.update(t)});else if(i&&c.current){const N=c.current(D),b=m.current;p()(N,b)||T(N)}else T(D)};try{n.callbacks[t].add(g),n.update(t)}catch(D){n.callbacks[t]=new Set,n.callbacks[t].add(g),n.update(t)}return()=>{n.callbacks[t].delete(g)}},[t]),A}},bCY9:function(h,u,e){"use strict";e.d(u,"a",function(){return o});var s=e("HyNC");const o=new s.b({validKeys:["modifyClientRenderOpts","patchRoutes","rootContainer","render","onRouteChange","getInitialState","initialStateConfig","request"]})},cDcd:function(h,u){h.exports=window.React},faye:function(h,u){h.exports=window.ReactDOM},"sm/d":function(h,u,e){"use strict";var s=e("cDcd"),o=e.n(s);const l=o.a.createContext({state:"red",dispatch:r=>{}});u.a=l},tB8F:function(h,u,e){"use strict";e.r(u);var s={};e.r(s),e.d(s,"request",function(){return p});var o={};e.r(o),e.d(o,"rootContainer",function(){return c});var l={};e.r(l),e.d(l,"rootContainer",function(){return L});var r=e("bCY9");const p={timeout:3e4,prefix:"",errorConfig:{adaptor:E=>F(F({},E),{success:E.code===200,errorMessage:E.message})},middlewares:[],requestInterceptors:[(E,M)=>(/^https?:\/\//.test(E)||(E=`http://poetry.apiopen.top/${E}`),{url:E,options:M})],responseInterceptors:[]};var f=e("cDcd"),R=e.n(f),v=e("9kvl"),t=e("rlch"),i=e("I5X1");if(typeof i.a!="function")throw new Error("[plugin-initial-state]: useModel is not a function, @umijs/plugin-model is required.");var n=E=>{const M=E.children,B=Object(f.useRef)(!1),G=v.c.applyPlugins({key:"initialStateConfig",type:t.a.modify,initialValue:{}})||{},H=Object(i.a)("@@initialState")||{},X=H.loading,K=X===void 0?!1:X;return Object(f.useEffect)(()=>{K||(B.current=!0)},[K]),K&&!B.current?G.loading||null:M};function c(E){return R.a.createElement(n,null,E)}var d=e("ODXe"),O=e("nKUr"),A=()=>({loading:!1,refresh:()=>{}}),T=e("7xWI"),m=e.n(T),x=e("sFpY"),g=e.n(x),D=e("FMtG");const N={"@@initialState":A},b=new m.a,a=g.a;var _=({children:E})=>Object(O.jsxs)(D.UmiContext.Provider,{value:b,children:[Object.entries(N).map(M=>Object(O.jsx)(a,{namespace:M[0],hook:M[1],onUpdate:B=>{const G=M,H=Object(d.a)(G,1),X=H[0];b.data[X]=B,b.update(X)}},M[0])),E]});function L(E){return R.a.createElement(_,null,E)}r.a.register({apply:s,path:"F:/demo/umi-demo/src/app.ts"}),r.a.register({apply:o,path:"../plugin-initial-state/runtime"}),r.a.register({apply:l,path:"../plugin-model/runtime"});var C=e("FfOG"),y=e("HyNC"),I=e("zlVK");function S(){const E=[{path:"/",component:e("+ego").default,routes:[{path:"/",exact:!0,component:e("GV2H").default},{path:"/login",exact:!0,component:e("A8du").default}]}];return r.a.applyPlugins({key:"patchRoutes",type:y.a.event,args:{routes:E}}),E}const P=(E={})=>r.a.applyPlugins({key:"render",type:y.a.compose,initialValue:()=>{const M=r.a.applyPlugins({key:"modifyClientRenderOpts",type:y.a.modify,initialValue:{routes:E.routes||S(),plugin:r.a,history:Object(C.a)(E.hot),isServer:Object({NODE_ENV:"production"}).__IS_SERVER,rootElement:"root"}});return Object(I.renderClient)(M)},args:E}),U=P();var j=u.default=U();window.g_umi={version:"3.3.1"}}});
